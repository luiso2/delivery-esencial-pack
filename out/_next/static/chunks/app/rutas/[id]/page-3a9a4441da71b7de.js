(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[511],{5199:function(e,t,a){Promise.resolve().then(a.bind(a,8337))},8337:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var r=a(7437),s=a(2265),i=a(4033),n=a(1396),d=a.n(n),l=a(887),c=a(3753),o=a(1001),m=a(9186),x=a(2125),u=a(7227),p=a(8265),h=a(6263),g=a(2929),v=a(6074),y=a(5255),w=a(307),j=a(1871),N=a(9476),f=a(5925);function b(){var e;let t=(0,i.useParams)(),a=(0,i.useRouter)(),[n,b]=(0,s.useState)(null),[D,S]=(0,s.useState)([]),[I,O]=(0,s.useState)(!0),[P,A]=(0,s.useState)(!1),[C,R]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t.id&&Z(t.id)},[t.id]);let Z=async e=>{try{await new Promise(e=>setTimeout(e,500));let t=j.v.find(t=>t.id===e);if(t){b(t);let e=t.orders.map(e=>e.orderId),a=N.n.filter(t=>e.includes(t.id));S(a)}else f.ZP.error("Ruta no encontrada")}catch(e){console.error("Error fetching route:",e),f.ZP.error("Error al cargar la ruta")}finally{O(!1)}},k=async e=>{if(n)try{await new Promise(e=>setTimeout(e,800));let t={...n,status:e};b(t),f.ZP.success("Ruta ".concat("active"===e?"activada":"completed"===e?"completada":"pausada"))}catch(e){console.error("Error updating route:",e),f.ZP.error("Error al actualizar la ruta")}},q=async()=>{if(n&&confirm("\xbfEst\xe1s seguro de eliminar esta ruta?"))try{await new Promise(e=>setTimeout(e,800)),f.ZP.success("Ruta eliminada"),a.push("/rutas")}catch(e){console.error("Error deleting route:",e),f.ZP.error("Error al eliminar la ruta")}},E=async e=>{if(n)try{await new Promise(e=>setTimeout(e,600));let t=n.orders.filter(t=>t.orderId!==e),a={...n,orders:t};b(a),S(D.filter(t=>t.id!==e)),f.ZP.success("Pedido eliminado de la ruta")}catch(e){console.error("Error removing order:",e),f.ZP.error("Error al eliminar el pedido")}},z=e=>(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat({pending:"bg-yellow-100 text-yellow-800",in_transit:"bg-blue-100 text-blue-800",delivered:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",incomplete:"bg-orange-100 text-orange-800"}[e]),children:{pending:"Pendiente",in_transit:"En Tr\xe1nsito",delivered:"Entregado",failed:"Fallido",incomplete:"Incompleto"}[e]});return I?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):n?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20 lg:pb-0",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r ".concat(n.color.replace("bg-","from-"),"-600 ").concat(n.color.replace("bg-","to-"),"-800 text-white"),children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(d(),{href:"/rutas",className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors",children:(0,r.jsx)(c.Z,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:n.name}),(e=n.status,(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat({draft:"bg-gray-100 text-gray-800",active:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800"}[e]),children:{draft:"Borrador",active:"Activa",completed:"Completada"}[e]}))]}),n.description&&(0,r.jsx)("p",{className:"mt-1 text-white/80",children:n.description})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:["draft"===n.status&&(0,r.jsxs)("button",{onClick:()=>k("active"),className:"btn-primary inline-flex items-center bg-white text-primary-600 hover:bg-gray-100",children:[(0,r.jsx)(o.Z,{className:"h-5 w-5 mr-2"}),"Activar"]}),"active"===n.status&&(0,r.jsxs)("button",{onClick:()=>k("completed"),className:"btn-primary inline-flex items-center bg-white text-primary-600 hover:bg-gray-100",children:[(0,r.jsx)(m.Z,{className:"h-5 w-5 mr-2"}),"Completar"]}),(0,r.jsx)("button",{onClick:()=>A(!P),className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors",children:(0,r.jsx)(x.Z,{className:"h-5 w-5"})}),(0,r.jsx)("button",{onClick:q,className:"p-2 rounded-lg bg-red-500/20 hover:bg-red-500/30 transition-colors",children:(0,r.jsx)(u.Z,{className:"h-5 w-5"})})]})]})})}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-8",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsx)("div",{className:"card-base p-4 bg-white",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Pedidos"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:n.orders.length})]}),(0,r.jsx)(p.Z,{className:"h-8 w-8 text-gray-400"})]})}),(0,r.jsx)("div",{className:"card-base p-4 bg-white",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Distancia"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:n.totalDistance||"0 km"})]}),(0,r.jsx)(h.Z,{className:"h-8 w-8 text-gray-400"})]})}),(0,r.jsx)("div",{className:"card-base p-4 bg-white",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Tiempo Est."}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:n.estimatedTime||"0 min"})]}),(0,r.jsx)(g.Z,{className:"h-8 w-8 text-gray-400"})]})}),(0,r.jsx)("div",{className:"card-base p-4 bg-white",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Completados"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-600",children:D.filter(e=>"delivered"===e.status).length})]}),(0,r.jsx)(m.Z,{className:"h-8 w-8 text-green-400"})]})})]})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6",children:[(0,r.jsxs)("div",{className:"card-base",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["Pedidos en la Ruta (",n.orders.length,")"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[P&&(0,r.jsxs)("button",{onClick:()=>R(!C),className:"btn-secondary inline-flex items-center ".concat(C?"bg-primary-100":""),children:[(0,r.jsx)(v.Z,{className:"h-5 w-5 mr-2"}),C?"Guardar Orden":"Reordenar"]}),(0,r.jsxs)(d(),{href:"/pedidos",className:"btn-primary inline-flex items-center",children:[(0,r.jsx)(y.Z,{className:"h-5 w-5 mr-2"}),"Agregar Pedido"]})]})]})}),(0,r.jsx)("div",{className:"divide-y divide-gray-200",children:0===n.orders.length?(0,r.jsxs)("div",{className:"p-8 text-center",children:[(0,r.jsx)(p.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No hay pedidos"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Agrega pedidos a esta ruta para comenzar"}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsxs)(d(),{href:"/pedidos",className:"btn-primary inline-flex items-center",children:[(0,r.jsx)(y.Z,{className:"h-5 w-5 mr-2"}),"Agregar Primer Pedido"]})})]}):n.orders.map((e,t)=>{let a=D.find(t=>t.id===e.orderId);return a?(0,r.jsx)("div",{className:"p-6 hover:bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"h-10 w-10 rounded-full ".concat(n.color," flex items-center justify-center text-white font-bold"),children:e.position})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(d(),{href:"/pedidos/".concat(a.id),className:"text-sm font-medium text-gray-900 hover:text-primary-600",children:a.id}),z(a.status)]}),(0,r.jsxs)("p",{className:"mt-1 text-sm text-gray-600",children:[a.clientName," - ",a.clientPhone]}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:a.address}),(0,r.jsxs)("div",{className:"mt-2 flex items-center space-x-4 text-xs text-gray-500",children:[e.distance&&(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 mr-1"}),e.distance]}),e.estimatedTime&&(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 mr-1"}),e.estimatedTime]}),(0,r.jsxs)("span",{className:"font-medium text-primary-600",children:[a.driverPayment," CUP"]})]})]})]}),P&&(0,r.jsx)("button",{onClick:()=>E(a.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,r.jsx)(u.Z,{className:"h-5 w-5"})})]})},e.orderId):null})})]}),(0,r.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsx)(d(),{href:"/rutas/".concat(n.id,"/mapa"),className:"card-base p-4 hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(w.Z,{className:"h-6 w-6 text-primary-600 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:"Ver en Mapa"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Visualizaci\xf3n de la ruta"})]})]})}),(0,r.jsx)(d(),{href:"/rutas/".concat(n.id,"/optimizar"),className:"card-base p-4 hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(v.Z,{className:"h-6 w-6 text-primary-600 mr-3"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:"Optimizar"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Reordenar pedidos"})]})]})}),(0,r.jsx)("button",{onClick:()=>navigator.share&&navigator.share({title:n.name,text:"Ruta ".concat(n.name," con ").concat(n.orders.length," pedidos"),url:window.location.href}),className:"card-base p-4 hover:shadow-md transition-shadow text-left",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{className:"h-6 w-6 text-primary-600 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m9.032 4.026a9.001 9.001 0 01-7.432 0m9.032-4.026A9.001 9.001 0 0112 3c-4.474 0-8.268 3.12-9.032 7.326m0 0A9.001 9.001 0 0012 21c4.474 0 8.268-3.12 9.032-7.326"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:"Compartir"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Enviar ruta"})]})]})})]})]})]}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(l.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Ruta no encontrada"}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)(d(),{href:"/rutas",className:"btn-primary",children:"Volver a Rutas"})})]})})}},9476:function(e,t,a){"use strict";a.d(t,{n:function(){return r}});let r=[{id:"ORD-001",clientName:"Mar\xeda Gonz\xe1lez",clientPhone:"+53 5234 5678",address:"Calle 23 #456, e/ 10 y 12",municipality:"Plaza de la Revoluci\xf3n",province:"La Habana",items:[{id:"1",name:"Paquete A",quantity:2,delivered:!1},{id:"2",name:"Paquete B",quantity:1,delivered:!1}],type:"express",status:"pending",driverId:"driver-001",estimatedDelivery:new Date(Date.now()+864e5).toISOString(),createdAt:new Date(Date.now()-1728e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"pending",driverPayment:350},{id:"ORD-002",clientName:"Carlos Rodr\xedguez",clientPhone:"+53 5876 5432",address:"Ave. 5ta #789, Miramar",municipality:"Playa",province:"La Habana",items:[{id:"3",name:"Documento importante",quantity:1,delivered:!1}],type:"normal",status:"in_transit",driverId:"driver-001",estimatedDelivery:new Date(Date.now()+2592e5).toISOString(),createdAt:new Date(Date.now()-864e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"pending",driverPayment:250},{id:"ORD-003",clientName:"Ana Mart\xednez",clientPhone:"+53 5111 2222",address:"Calle Mart\xed #123",municipality:"Centro Habana",province:"La Habana",items:[{id:"4",name:"Caja peque\xf1a",quantity:3,delivered:!0},{id:"5",name:"Sobre",quantity:2,delivered:!0}],type:"normal",status:"delivered",driverId:"driver-001",estimatedDelivery:new Date(Date.now()-864e5).toISOString(),createdAt:new Date(Date.now()-432e6).toISOString(),updatedAt:new Date(Date.now()-864e5).toISOString(),captureStatus:"success",notes:"Entregado sin novedad",driverPayment:400},{id:"ORD-004",clientName:"Pedro S\xe1nchez",clientPhone:"+53 5333 4444",address:"Calle 70 #234",municipality:"Marianao",province:"La Habana",items:[{id:"6",name:"Paquete grande",quantity:1,delivered:!1}],type:"express",status:"pending",driverId:"driver-001",estimatedDelivery:new Date(Date.now()-216e5).toISOString(),createdAt:new Date(Date.now()-1728e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"pending",driverPayment:500},{id:"ORD-005",clientName:"Laura D\xedaz",clientPhone:"+53 5555 6666",address:"Ave. 31 #890",municipality:"Cerro",province:"La Habana",items:[{id:"7",name:"Documentos",quantity:5,delivered:!1}],type:"normal",status:"failed",driverId:"driver-001",estimatedDelivery:new Date(Date.now()-1728e5).toISOString(),createdAt:new Date(Date.now()-6048e5).toISOString(),updatedAt:new Date(Date.now()-1728e5).toISOString(),captureStatus:"failed",notes:"Cliente no disponible en direcci\xf3n",driverPayment:200},{id:"ORD-006",clientName:"Roberto Fern\xe1ndez",clientPhone:"+53 5777 8888",address:"Calle San L\xe1zaro #567",municipality:"Centro Habana",province:"La Habana",items:[{id:"8",name:"Caja mediana",quantity:2,delivered:!0},{id:"9",name:"Sobre grande",quantity:1,delivered:!1}],type:"normal",status:"incomplete",driverId:"driver-001",estimatedDelivery:new Date(Date.now()+864e5).toISOString(),createdAt:new Date(Date.now()-2592e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"success",notes:"Cliente solo recibi\xf3 parte del pedido",driverPayment:300},{id:"ORD-007",clientName:"Elena Garc\xeda",clientPhone:"+53 5999 0000",address:"Calle 1ra #234, Vedado",municipality:"Plaza de la Revoluci\xf3n",province:"La Habana",items:[{id:"10",name:"Paquete urgente",quantity:1,delivered:!1}],type:"express",status:"in_transit",driverId:"driver-001",estimatedDelivery:new Date(Date.now()+216e5).toISOString(),createdAt:new Date(Date.now()-216e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"partial",driverPayment:450},{id:"ORD-008",clientName:"Jorge L\xf3pez",clientPhone:"+53 5123 4567",address:"Ave. Salvador Allende #789",municipality:"Diez de Octubre",province:"La Habana",items:[{id:"11",name:"Caja grande",quantity:1,delivered:!1},{id:"12",name:"Caja peque\xf1a",quantity:3,delivered:!1}],type:"normal",status:"pending",driverId:"driver-002",estimatedDelivery:new Date(Date.now()+1728e5).toISOString(),createdAt:new Date(Date.now()-432e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"pending",driverPayment:380},{id:"ORD-009",clientName:"Isabel Morales",clientPhone:"+53 5234 8765",address:"Calle 100 #456",municipality:"Boyeros",province:"La Habana",items:[{id:"13",name:"Sobre confidencial",quantity:1,delivered:!1}],type:"express",status:"pending",driverId:"driver-001",estimatedDelivery:new Date(Date.now()+432e5).toISOString(),createdAt:new Date(Date.now()-72e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"pending",driverPayment:400},{id:"ORD-010",clientName:"Miguel Torres",clientPhone:"+53 5345 6789",address:"Calle 26 #123, Nuevo Vedado",municipality:"Plaza de la Revoluci\xf3n",province:"La Habana",items:[{id:"14",name:"Paquete mediano",quantity:2,delivered:!0}],type:"normal",status:"delivered",driverId:"driver-001",estimatedDelivery:new Date(Date.now()-2592e5).toISOString(),createdAt:new Date(Date.now()-5184e5).toISOString(),updatedAt:new Date(Date.now()-2592e5).toISOString(),captureStatus:"success",notes:"Entrega exitosa",driverPayment:280}]},1871:function(e,t,a){"use strict";a.d(t,{v:function(){return r}});let r=[{id:"route-1",name:"Ruta Centro Habana",description:"Zona centro de La Habana",color:"bg-blue-500",orders:[{orderId:"ORD-001",position:1,distance:"2.5 km",estimatedTime:"15 min"},{orderId:"ORD-002",position:2,distance:"1.8 km",estimatedTime:"10 min"},{orderId:"ORD-003",position:3,distance:"3.2 km",estimatedTime:"20 min"}],totalDistance:"12 km",estimatedTime:"2h 30min",status:"active",createdAt:new Date(Date.now()-6048e5).toISOString(),updatedAt:new Date().toISOString()},{id:"route-2",name:"Ruta Vedado",description:"Zona del Vedado",color:"bg-green-500",orders:[{orderId:"ORD-004",position:1,distance:"1.2 km",estimatedTime:"8 min"},{orderId:"ORD-005",position:2,distance:"2.1 km",estimatedTime:"12 min"}],totalDistance:"8 km",estimatedTime:"1h 45min",status:"active",createdAt:new Date(Date.now()-432e6).toISOString(),updatedAt:new Date().toISOString()},{id:"route-3",name:"Ruta Playa",description:"Municipio Playa",color:"bg-purple-500",orders:[],totalDistance:"0 km",estimatedTime:"0 min",status:"draft",createdAt:new Date(Date.now()-1728e5).toISOString(),updatedAt:new Date().toISOString()}]}},function(e){e.O(0,[176,38,971,938,744],function(){return e(e.s=5199)}),_N_E=e.O()}]);