(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[429],{1136:function(e,t,a){Promise.resolve().then(a.bind(a,301))},301:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return z}});var r=a(7437),s=a(2265),i=a(4033),n=a(4660),l=a(9476);let d=(0,n.Ue)((e,t)=>({orders:[],loading:!1,error:null,filters:{},selectedOrder:null,totalOrders:0,totalPages:0,currentPage:1,fetchOrders:async a=>{e({loading:!0,error:null});try{var r;let s=a||t().filters;await new Promise(e=>setTimeout(e,500));let i=[...l.n];if((null===(r=s.status)||void 0===r?void 0:r.length)&&(i=i.filter(e=>s.status.includes(e.status))),s.type&&(i=i.filter(e=>e.type===s.type)),s.search){let e=s.search.toLowerCase();i=i.filter(t=>t.id.toLowerCase().includes(e)||t.clientName.toLowerCase().includes(e)||t.address.toLowerCase().includes(e)||t.municipality.toLowerCase().includes(e))}if(s.delayed){let e=new Date;i=i.filter(t=>{let a=new Date(t.estimatedDelivery);return e>a&&!["delivered","failed"].includes(t.status)})}let n=s.page||1,d=s.limit||100,c=(n-1)*d,o=i.slice(c,c+d);e({orders:o,totalOrders:i.length,totalPages:Math.ceil(i.length/d),currentPage:n,loading:!1})}catch(t){e({error:t.message||"Error fetching orders",loading:!1})}},fetchOrderById:async t=>{e({loading:!0,error:null});try{await new Promise(e=>setTimeout(e,300));let a=l.n.find(e=>e.id===t);if(a)e({selectedOrder:a,loading:!1});else throw Error("Order not found")}catch(t){e({error:t.message||"Error fetching order",loading:!1})}},updateOrder:async(t,a)=>{e({loading:!0,error:null});try{await new Promise(e=>setTimeout(e,300));let r=l.n.findIndex(e=>e.id===t);if(-1!==r){let s={...l.n[r],...a};l.n[r]=s,e(e=>{var a;return{orders:e.orders.map(e=>e.id===t?s:e),selectedOrder:(null===(a=e.selectedOrder)||void 0===a?void 0:a.id)===t?s:e.selectedOrder,loading:!1}})}else throw Error("Order not found")}catch(t){e({error:t.message||"Error updating order",loading:!1})}},deleteOrder:async t=>{e({loading:!0,error:null});try{await new Promise(e=>setTimeout(e,300));let a=l.n.findIndex(e=>e.id===t);if(-1!==a)l.n.splice(a,1),e(e=>{var a;return{orders:e.orders.filter(e=>e.id!==t),selectedOrder:(null===(a=e.selectedOrder)||void 0===a?void 0:a.id)===t?null:e.selectedOrder,loading:!1}});else throw Error("Order not found")}catch(t){e({error:t.message||"Error deleting order",loading:!1})}},setFilters:t=>{e({filters:t})},clearFilters:()=>{e({filters:{}})},setSelectedOrder:t=>{e({selectedOrder:t})}}));var c=a(1396),o=a.n(c),m=a(9964),x=a(6263),u=a(6108),p=a(5587),g=a(2929),h=a(5838),y=a(3217),v=a(5925);function b(e){let{order:t}=e,a=(0,m.qz)(t),s=(0,m.Jq)(t),i=s?(0,m.W5)(t):0,n=(e,t)=>{e.preventDefault(),e.stopPropagation();let a=t.replace(/\s+/g,"").replace(/[^\d+]/g,"");window.location.href="tel:".concat(a)};return(0,r.jsx)("div",{className:"card-base p-4 ".concat({urgent:"border-red-300 bg-red-50",warning:"border-yellow-300 bg-yellow-50",success:"border-green-300 bg-green-50",normal:"border-blue-300 bg-blue-50"}[a]," relative"),children:(0,r.jsxs)(o(),{href:"/pedidos/".concat(t.id),className:"block",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:["#",t.id]}),"express"===t.type&&(0,r.jsx)("span",{className:"badge-base bg-purple-100 text-purple-800",children:m.G3[t.type]})]}),(0,r.jsx)("p",{className:"mt-1 text-sm font-medium text-gray-900",children:t.clientName})]}),(0,r.jsx)("span",{className:"badge-base ".concat({pending:"badge-pending",in_transit:"badge-in-transit",delivered:"badge-delivered",incomplete:"badge-incomplete",failed:"badge-failed"}[t.status]),children:m.HM[t.status]})]}),(0,r.jsxs)("div",{className:"space-y-2 mb-3",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-2 flex-1 mr-2",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 text-gray-400 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 line-clamp-2",children:[t.address,", ",t.municipality]})]}),(0,r.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation();let a="".concat(t.address,", ").concat(t.municipality,", ").concat(t.province);navigator.clipboard.writeText(a).then(()=>{v.ZP.success("Direcci\xf3n copiada al portapapeles")}).catch(()=>{v.ZP.error("Error al copiar la direcci\xf3n")})},className:"p-1.5 hover:bg-white/50 rounded-lg transition-colors",title:"Copiar direcci\xf3n",children:(0,r.jsx)(u.Z,{className:"h-4 w-4 text-gray-600"})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:t.clientPhone})]}),(0,r.jsxs)("button",{onClick:e=>n(e,t.clientPhone),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-xs font-medium rounded-lg transition-colors flex items-center space-x-1",children:[(0,r.jsx)(p.Z,{className:"h-3.5 w-3.5"}),(0,r.jsx)("span",{children:"Llamar"})]})]})]}),(0,r.jsx)("div",{className:"mb-3",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[t.items.length," item",1!==t.items.length?"s":""," â€¢",t.driverPayment," CUP"]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(g.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:new Date(t.estimatedDelivery).toLocaleDateString("es-ES",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})})]}),s&&(0,r.jsxs)("div",{className:"flex items-center space-x-1 text-red-600",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4"}),(0,r.jsxs)("span",{className:"text-xs font-medium",children:[i,"h atrasado"]})]})]}),"success"!==t.captureStatus&&(0,r.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"Captura:"}),(0,r.jsx)("span",{className:"text-xs font-medium ".concat("failed"===t.captureStatus?"text-red-600":"partial"===t.captureStatus?"text-yellow-600":"text-gray-600"),children:"pending"===t.captureStatus?"Pendiente":"partial"===t.captureStatus?"Parcial":"failed"===t.captureStatus?"Fallida":""})]})}),(0,r.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:(0,r.jsx)(y.Z,{className:"h-5 w-5 text-gray-400"})})]})})}function j(){let{filters:e,setFilters:t,fetchOrders:a}=d(),[i,n]=(0,s.useState)(e),l=e=>{let t=i.status||[],a=t.includes(e)?t.filter(t=>t!==e):[...t,e];n({...i,status:a})},c=e=>{n({...i,type:e})},o=e=>{n({...i,delayed:e})},x=i.status&&i.status.length>0||i.type||i.delayed;return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:["pending","in_transit","delivered","incomplete","failed"].map(e=>{var t;return(0,r.jsx)("button",{onClick:()=>l(e),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat((null===(t=i.status)||void 0===t?void 0:t.includes(e))?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:m.HM[e]},e)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>c(null),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat(i.type?"bg-gray-200 text-gray-700 hover:bg-gray-300":"bg-primary-600 text-white"),children:"Todos"}),["normal","express"].map(e=>(0,r.jsx)("button",{onClick:()=>c(e),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat(i.type===e?"bg-primary-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:m.G3[e]},e))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filtros especiales"}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsx)("button",{onClick:()=>o(!i.delayed),className:"px-3 py-1 rounded-full text-sm font-medium transition-colors ".concat(i.delayed?"bg-red-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Pedidos atrasados"})})]}),(0,r.jsxs)("div",{className:"flex justify-between pt-4 border-t border-gray-200",children:[(0,r.jsx)("button",{onClick:()=>{let e={};n(e),t(e),a(e)},disabled:!x,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed",children:"Limpiar filtros"}),(0,r.jsx)("button",{onClick:()=>{t(i),a(i)},className:"px-4 py-2 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",children:"Aplicar filtros"})]})]})}var f=a(96),N=a(8265),w=a(9186),D=a(1095);function S(){let[e,t]=(0,s.useState)(null),[a,i]=(0,s.useState)(!0);(0,s.useEffect)(()=>{n()},[]);let n=async()=>{try{await new Promise(e=>setTimeout(e,300));let e=l.n.length,a=l.n.filter(e=>"pending"===e.status).length,r=l.n.filter(e=>"in_transit"===e.status).length,s=l.n.filter(e=>"delivered"===e.status).length,i=l.n.filter(e=>"failed"===e.status).length,n=l.n.filter(e=>"incomplete"===e.status).length,d=new Date,c=l.n.filter(e=>{let t=new Date(e.estimatedDelivery);return d>t&&!["delivered","failed"].includes(e.status)}).length,o=new Date().toDateString(),m=l.n.filter(e=>"delivered"===e.status&&new Date(e.updatedAt).toDateString()===o).length,x=f.$.filter(e=>"pending"===e.status).length,u=f.$.filter(e=>"rejected"===e.status).length,p=f.$.filter(e=>"verified"===e.status).length,g=f.$.filter(e=>"incomplete"===e.status).length,h=l.n.reduce((e,t)=>e+t.driverPayment,0),y=l.n.filter(e=>"pending"===e.status).reduce((e,t)=>e+t.driverPayment,0);t({orders:{total:e,pending:a,inTransit:r,delivered:s,failed:i,incomplete:n,delayed:c,todayDeliveries:m},captures:{pending:x,failed:u,success:p,partial:g},revenue:{total:h,pending:y,average:e>0?h/e:0}})}catch(e){console.error("Error fetching metrics:",e)}finally{i(!1)}};if(a)return(0,r.jsx)("div",{className:"flex justify-center py-12",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(!e)return(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-500",children:"No se pudieron cargar las m\xe9tricas"})});let d=e.orders.total>0?Math.round(e.orders.delivered/e.orders.total*100):0;return e.orders.total>0&&(e.captures.success,e.orders.total),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsx)("div",{className:"card-base p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Total de Pedidos"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:e.orders.total}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[e.orders.todayDeliveries," para hoy"]})]}),(0,r.jsx)(N.Z,{className:"h-10 w-10 text-primary-400"})]})}),(0,r.jsx)("div",{className:"card-base p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Tasa de Entrega"}),(0,r.jsxs)("p",{className:"text-3xl font-bold text-green-600",children:[d,"%"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[e.orders.delivered," completados"]})]}),(0,r.jsx)(w.Z,{className:"h-10 w-10 text-green-400"})]})}),(0,r.jsx)("div",{className:"card-base p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Ingresos Totales"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-primary-600",children:[e.revenue.total," CUP"]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Promedio: ",e.revenue.average," CUP"]})]}),(0,r.jsx)(D.Z,{className:"h-10 w-10 text-primary-400"})]})}),(0,r.jsx)("div",{className:"card-base p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Pedidos Atrasados"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-red-600",children:e.orders.delayed}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Requieren atenci\xf3n"})]}),(0,r.jsx)(g.Z,{className:"h-10 w-10 text-red-400"})]})})]}),(0,r.jsxs)("div",{className:"card-base p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Distribuci\xf3n por Estado"}),(0,r.jsx)("div",{className:"space-y-3",children:[{label:"Pendientes",value:e.orders.pending,color:"bg-yellow-500"},{label:"En Tr\xe1nsito",value:e.orders.inTransit,color:"bg-blue-500"},{label:"Entregados",value:e.orders.delivered,color:"bg-green-500"},{label:"Incompletos",value:e.orders.incomplete,color:"bg-orange-500"},{label:"Fallidos",value:e.orders.failed,color:"bg-red-500"}].map(t=>{let a=e.orders.total>0?t.value/e.orders.total*100:0;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,r.jsx)("span",{className:"text-gray-600",children:t.label}),(0,r.jsx)("span",{className:"font-medium",children:t.value})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"".concat(t.color," h-2 rounded-full transition-all duration-500"),style:{width:"".concat(a,"%")}})})]},t.label)})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"card-base p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Estado de Capturas"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Pendientes"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:e.captures.pending})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Parciales"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:e.captures.partial})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Completadas"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-600",children:e.captures.success})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Fallidas"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-red-600",children:e.captures.failed})]})]})]}),(0,r.jsxs)("div",{className:"card-base p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Resumen Financiero"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Cobrado"}),(0,r.jsxs)("span",{className:"font-semibold text-green-600",children:[e.revenue.total," CUP"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Pendiente"}),(0,r.jsxs)("span",{className:"font-semibold text-yellow-600",children:[e.revenue.pending," CUP"]})]}),(0,r.jsx)("div",{className:"pt-3 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Total Esperado"}),(0,r.jsxs)("span",{className:"font-bold text-gray-900",children:[e.revenue.total+e.revenue.pending," CUP"]})]})})]})]})]})]})}var O=a(1706),I=a(8034),P=a(4020),A=a(5255),C=a(307),R=a(2170);function z(){var e,t,a,n;let l=(0,i.useSearchParams)(),{orders:c,loading:o,fetchOrders:m,filters:u,setFilters:p}=d(),[g,h]=(0,s.useState)("list"),[y,v]=(0,s.useState)(""),[f,w]=(0,s.useState)(!1),[D,z]=(0,s.useState)(null),[E,L]=(0,s.useState)([{id:"route-1",name:"Ruta Centro Habana",orders:5,distance:"12 km",time:"2h 30min",color:"bg-blue-500"},{id:"route-2",name:"Ruta Vedado",orders:3,distance:"8 km",time:"1h 45min",color:"bg-green-500"},{id:"route-3",name:"Ruta Playa",orders:4,distance:"15 km",time:"3h",color:"bg-purple-500"}]);return(0,s.useEffect)(()=>{let e=l.get("status"),t=l.get("delayed"),a={...u,status:e?[e]:void 0,delayed:"true"===t};p(a),m(a)},[l]),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20 lg:pb-0",children:[(0,r.jsx)("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Pedidos"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>{m(u)},className:"p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100",disabled:o,children:(0,r.jsx)(O.Z,{className:"h-5 w-5 ".concat(o?"animate-spin":"")})}),(0,r.jsx)("button",{onClick:()=>w(!f),className:"p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100",children:(0,r.jsx)(I.Z,{className:"h-5 w-5"})})]})]}),(0,r.jsxs)("div",{className:"flex space-x-8",children:[(0,r.jsx)("button",{onClick:()=>h("list"),className:"py-2 px-1 border-b-2 text-sm font-medium transition-colors ".concat("list"===g?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Lista"}),(0,r.jsx)("button",{onClick:()=>h("routes"),className:"py-2 px-1 border-b-2 text-sm font-medium transition-colors ".concat("routes"===g?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"Rutas"}),(0,r.jsx)("button",{onClick:()=>h("metrics"),className:"py-2 px-1 border-b-2 text-sm font-medium transition-colors ".concat("metrics"===g?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"),children:"M\xe9tricas"})]})]})}),(0,r.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p({...u,search:y}),m({...u,search:y})},className:"relative",children:[(0,r.jsx)(P.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),(0,r.jsx)("input",{type:"text",value:y,onChange:e=>v(e.target.value),placeholder:"Buscar por ID, cliente, direcci\xf3n...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]})})}),f&&(0,r.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,r.jsx)(j,{})})}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:"metrics"===g?(0,r.jsx)(S,{}):"routes"===g?(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Organizaci\xf3n de Rutas"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Organiza tus entregas por zonas para optimizar tu recorrido"})]}),(0,r.jsxs)("button",{className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 flex items-center space-x-2",children:[(0,r.jsx)(A.Z,{className:"h-5 w-5"}),(0,r.jsx)("span",{children:"Nueva Ruta"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"lg:col-span-1 space-y-3",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[(0,r.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Rutas Activas"}),(0,r.jsx)("div",{className:"space-y-2",children:E.map(e=>(0,r.jsx)("div",{onClick:()=>z(e.id),className:"p-3 rounded-lg border cursor-pointer transition-all ".concat(D===e.id?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:(0,r.jsx)("div",{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full mt-1.5 ".concat(e.color)}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900 text-sm",children:e.name}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[e.orders," pedidos"]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 mt-1",children:[(0,r.jsx)("span",{className:"text-xs text-gray-400",children:e.distance}),(0,r.jsxs)("span",{className:"text-xs text-gray-400",children:["~",e.time]})]})]})]})})},e.id))})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[(0,r.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"Pedidos Sin Asignar"}),(0,r.jsx)("div",{className:"space-y-2",children:c.filter(e=>"pending"===e.status).slice(0,3).map(e=>(0,r.jsxs)("div",{className:"p-2 bg-gray-50 rounded-lg border border-gray-200",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["#",e.id]}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:e.clientName}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:e.municipality})]},e.id))}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Arrastra pedidos aqu\xed para asignarlos a una ruta"})]})]}),(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:D?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:null===(e=E.find(e=>e.id===D))||void 0===e?void 0:e.name}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:"Optimizar"}),(0,r.jsx)("button",{className:"px-3 py-1 text-sm bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Iniciar Ruta"})]})]}),(0,r.jsx)("div",{className:"bg-gray-100 rounded-lg h-64 mb-4 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(C.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Vista del mapa de la ruta"}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:"Integraci\xf3n con mapas disponible pr\xf3ximamente"})]})}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Orden de Entrega"}),c.filter(e=>"pending"===e.status||"in_transit"===e.status).slice(0,5).map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded-lg",children:[(0,r.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-primary-600 text-white text-xs rounded-full flex items-center justify-center",children:t+1}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["#",e.id," - ",e.clientName]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[e.address,", ",e.municipality]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)("span",{className:"text-xs text-gray-500",children:"2.5 km"})]})]},e.id))]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-4 pt-4 border-t border-gray-200",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Distancia Total"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:null===(t=E.find(e=>e.id===D))||void 0===t?void 0:t.distance})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Tiempo Estimado"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:null===(a=E.find(e=>e.id===D))||void 0===a?void 0:a.time})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Pedidos"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:null===(n=E.find(e=>e.id===D))||void 0===n?void 0:n.orders})]})]})]}):(0,r.jsx)("div",{className:"h-96 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(N.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Selecciona una ruta para ver los detalles"}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"O crea una nueva ruta para comenzar"})]})})})})]})]}):(0,r.jsx)(r.Fragment,{children:o?(0,r.jsx)("div",{className:"flex justify-center py-12",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):0===c.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(R.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,r.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron pedidos"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Intenta ajustar los filtros de b\xfasqueda"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[c.length," pedido",1!==c.length?"s":""]})}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:c.map(e=>(0,r.jsx)(b,{order:e},e.id))})]})})})]})}},96:function(e,t,a){"use strict";a.d(t,{$:function(){return r}});let r=[{id:"CAP-001",orderId:"ORD-003",type:"delivery",imageUrl:"/api/placeholder/400/300",thumbnailUrl:"/api/placeholder/100/75",status:"verified",location:{latitude:23.1136,longitude:-82.3666,address:"Vedado, La Habana"},notes:"Entrega exitosa en puerta principal",capturedBy:"Juan P\xe9rez",capturedAt:new Date(Date.now()-864e5).toISOString(),verifiedBy:"Admin",verifiedAt:new Date(Date.now()-72e6).toISOString(),createdAt:new Date(Date.now()-864e5).toISOString(),updatedAt:new Date(Date.now()-72e6).toISOString()},{id:"CAP-002",orderId:"ORD-010",type:"signature",imageUrl:"/api/placeholder/400/300",thumbnailUrl:"/api/placeholder/100/75",status:"verified",location:{latitude:23.1336,longitude:-82.3836,address:"Miramar, La Habana"},notes:"Firma del cliente confirmada",capturedBy:"Juan P\xe9rez",capturedAt:new Date(Date.now()-2592e5).toISOString(),verifiedBy:"Admin",verifiedAt:new Date(Date.now()-252e6).toISOString(),createdAt:new Date(Date.now()-2592e5).toISOString(),updatedAt:new Date(Date.now()-252e6).toISOString()},{id:"CAP-003",orderId:"ORD-001",type:"document",imageUrl:"/api/placeholder/400/300",thumbnailUrl:"/api/placeholder/100/75",status:"pending",location:{latitude:23.0511,longitude:-82.3452,address:"Centro Habana, La Habana"},notes:"Albar\xe1n pendiente de verificaci\xf3n",capturedBy:"Juan P\xe9rez",capturedAt:new Date(Date.now()-72e5).toISOString(),createdAt:new Date(Date.now()-72e5).toISOString(),updatedAt:new Date(Date.now()-72e5).toISOString()},{id:"CAP-004",orderId:"ORD-002",type:"delivery",imageUrl:"/api/placeholder/400/300",thumbnailUrl:"/api/placeholder/100/75",status:"pending",location:{latitude:23.1036,longitude:-82.4066,address:"Playa, La Habana"},notes:"Foto de paquete en puerta",capturedBy:"Juan P\xe9rez",capturedAt:new Date(Date.now()-144e5).toISOString(),createdAt:new Date(Date.now()-144e5).toISOString(),updatedAt:new Date(Date.now()-144e5).toISOString()},{id:"CAP-005",orderId:"ORD-005",type:"incident",imageUrl:"/api/placeholder/400/300",thumbnailUrl:"/api/placeholder/100/75",status:"rejected",location:{latitude:23.0811,longitude:-82.4552,address:"Marianao, La Habana"},notes:"Direcci\xf3n incorrecta",rejectionReason:"Imagen borrosa, no se puede verificar la entrega correctamente",capturedBy:"Juan P\xe9rez",capturedAt:new Date(Date.now()-1728e5).toISOString(),verifiedBy:"Admin",verifiedAt:new Date(Date.now()-144e6).toISOString(),createdAt:new Date(Date.now()-1728e5).toISOString(),updatedAt:new Date(Date.now()-144e6).toISOString()},{id:"CAP-006",orderId:"ORD-004",type:"return",imageUrl:"/api/placeholder/400/300",thumbnailUrl:"/api/placeholder/100/75",status:"verified",location:{latitude:23.0236,longitude:-82.3966,address:"Cerro, La Habana"},notes:"Devoluci\xf3n - Cliente rechaz\xf3 el paquete",capturedBy:"Juan P\xe9rez",capturedAt:new Date(Date.now()-1296e5).toISOString(),verifiedBy:"Admin",verifiedAt:new Date(Date.now()-108e6).toISOString(),createdAt:new Date(Date.now()-1296e5).toISOString(),updatedAt:new Date(Date.now()-108e6).toISOString()},{id:"CAP-007",orderId:"ORD-006",type:"document",imageUrl:"/api/placeholder/400/300",thumbnailUrl:"/api/placeholder/100/75",status:"pending",location:{latitude:23.1236,longitude:-82.3466,address:"Plaza de la Revoluci\xf3n, La Habana"},notes:"Albar\xe1n de entrega parcial",capturedBy:"Juan P\xe9rez",capturedAt:new Date(Date.now()-216e5).toISOString(),createdAt:new Date(Date.now()-216e5).toISOString(),updatedAt:new Date(Date.now()-216e5).toISOString()},{id:"CAP-008",orderId:"ORD-007",type:"delivery",imageUrl:"/api/placeholder/400/300",thumbnailUrl:"/api/placeholder/100/75",status:"pending",location:{latitude:23.0936,longitude:-82.3366,address:"Habana Vieja, La Habana"},notes:"Entrega express completada",capturedBy:"Juan P\xe9rez",capturedAt:new Date(Date.now()-36e5).toISOString(),createdAt:new Date(Date.now()-36e5).toISOString(),updatedAt:new Date(Date.now()-36e5).toISOString()}];r.push({id:"CAP-009",orderId:"ORD-008",type:"delivery",imageUrl:"/api/placeholder/400/300",thumbnailUrl:"/api/placeholder/100/75",status:"incomplete",location:{latitude:23.1436,longitude:-82.3566,address:"Nuevo Vedado, La Habana"},notes:"Entrega parcial - faltan 2 items",capturedBy:"Juan P\xe9rez",capturedAt:new Date(Date.now()-288e5).toISOString(),createdAt:new Date(Date.now()-288e5).toISOString(),updatedAt:new Date(Date.now()-288e5).toISOString()}),r.filter(e=>"pending"===e.status).length,r.filter(e=>"verified"===e.status).length,r.filter(e=>"rejected"===e.status).length,r.filter(e=>"incomplete"===e.status).length},9476:function(e,t,a){"use strict";a.d(t,{n:function(){return r}});let r=[{id:"ORD-001",clientName:"Mar\xeda Gonz\xe1lez",clientPhone:"+53 5234 5678",address:"Calle 23 #456, e/ 10 y 12",municipality:"Plaza de la Revoluci\xf3n",province:"La Habana",items:[{id:"1",name:"Paquete A",quantity:2,delivered:!1},{id:"2",name:"Paquete B",quantity:1,delivered:!1}],type:"express",status:"pending",driverId:"driver-001",estimatedDelivery:new Date(Date.now()+864e5).toISOString(),createdAt:new Date(Date.now()-1728e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"pending",driverPayment:350},{id:"ORD-002",clientName:"Carlos Rodr\xedguez",clientPhone:"+53 5876 5432",address:"Ave. 5ta #789, Miramar",municipality:"Playa",province:"La Habana",items:[{id:"3",name:"Documento importante",quantity:1,delivered:!1}],type:"normal",status:"in_transit",driverId:"driver-001",estimatedDelivery:new Date(Date.now()+2592e5).toISOString(),createdAt:new Date(Date.now()-864e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"pending",driverPayment:250},{id:"ORD-003",clientName:"Ana Mart\xednez",clientPhone:"+53 5111 2222",address:"Calle Mart\xed #123",municipality:"Centro Habana",province:"La Habana",items:[{id:"4",name:"Caja peque\xf1a",quantity:3,delivered:!0},{id:"5",name:"Sobre",quantity:2,delivered:!0}],type:"normal",status:"delivered",driverId:"driver-001",estimatedDelivery:new Date(Date.now()-864e5).toISOString(),createdAt:new Date(Date.now()-432e6).toISOString(),updatedAt:new Date(Date.now()-864e5).toISOString(),captureStatus:"success",notes:"Entregado sin novedad",driverPayment:400},{id:"ORD-004",clientName:"Pedro S\xe1nchez",clientPhone:"+53 5333 4444",address:"Calle 70 #234",municipality:"Marianao",province:"La Habana",items:[{id:"6",name:"Paquete grande",quantity:1,delivered:!1}],type:"express",status:"pending",driverId:"driver-001",estimatedDelivery:new Date(Date.now()-216e5).toISOString(),createdAt:new Date(Date.now()-1728e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"pending",driverPayment:500},{id:"ORD-005",clientName:"Laura D\xedaz",clientPhone:"+53 5555 6666",address:"Ave. 31 #890",municipality:"Cerro",province:"La Habana",items:[{id:"7",name:"Documentos",quantity:5,delivered:!1}],type:"normal",status:"failed",driverId:"driver-001",estimatedDelivery:new Date(Date.now()-1728e5).toISOString(),createdAt:new Date(Date.now()-6048e5).toISOString(),updatedAt:new Date(Date.now()-1728e5).toISOString(),captureStatus:"failed",notes:"Cliente no disponible en direcci\xf3n",driverPayment:200},{id:"ORD-006",clientName:"Roberto Fern\xe1ndez",clientPhone:"+53 5777 8888",address:"Calle San L\xe1zaro #567",municipality:"Centro Habana",province:"La Habana",items:[{id:"8",name:"Caja mediana",quantity:2,delivered:!0},{id:"9",name:"Sobre grande",quantity:1,delivered:!1}],type:"normal",status:"incomplete",driverId:"driver-001",estimatedDelivery:new Date(Date.now()+864e5).toISOString(),createdAt:new Date(Date.now()-2592e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"success",notes:"Cliente solo recibi\xf3 parte del pedido",driverPayment:300},{id:"ORD-007",clientName:"Elena Garc\xeda",clientPhone:"+53 5999 0000",address:"Calle 1ra #234, Vedado",municipality:"Plaza de la Revoluci\xf3n",province:"La Habana",items:[{id:"10",name:"Paquete urgente",quantity:1,delivered:!1}],type:"express",status:"in_transit",driverId:"driver-001",estimatedDelivery:new Date(Date.now()+216e5).toISOString(),createdAt:new Date(Date.now()-216e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"partial",driverPayment:450},{id:"ORD-008",clientName:"Jorge L\xf3pez",clientPhone:"+53 5123 4567",address:"Ave. Salvador Allende #789",municipality:"Diez de Octubre",province:"La Habana",items:[{id:"11",name:"Caja grande",quantity:1,delivered:!1},{id:"12",name:"Caja peque\xf1a",quantity:3,delivered:!1}],type:"normal",status:"pending",driverId:"driver-002",estimatedDelivery:new Date(Date.now()+1728e5).toISOString(),createdAt:new Date(Date.now()-432e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"pending",driverPayment:380},{id:"ORD-009",clientName:"Isabel Morales",clientPhone:"+53 5234 8765",address:"Calle 100 #456",municipality:"Boyeros",province:"La Habana",items:[{id:"13",name:"Sobre confidencial",quantity:1,delivered:!1}],type:"express",status:"pending",driverId:"driver-001",estimatedDelivery:new Date(Date.now()+432e5).toISOString(),createdAt:new Date(Date.now()-72e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"pending",driverPayment:400},{id:"ORD-010",clientName:"Miguel Torres",clientPhone:"+53 5345 6789",address:"Calle 26 #123, Nuevo Vedado",municipality:"Plaza de la Revoluci\xf3n",province:"La Habana",items:[{id:"14",name:"Paquete mediano",quantity:2,delivered:!0}],type:"normal",status:"delivered",driverId:"driver-001",estimatedDelivery:new Date(Date.now()-2592e5).toISOString(),createdAt:new Date(Date.now()-5184e5).toISOString(),updatedAt:new Date(Date.now()-2592e5).toISOString(),captureStatus:"success",notes:"Entrega exitosa",driverPayment:280}]},9964:function(e,t,a){"use strict";a.d(t,{G3:function(){return s},HM:function(){return r},Jq:function(){return i},Os:function(){return d},W5:function(){return n},qz:function(){return l}});let r={pending:"Pendiente",in_transit:"En Camino",delivered:"Entregado",incomplete:"Incompleto",failed:"Fallido"},s={normal:"Normal",express:"Express"};function i(e){let t=new Date,a=new Date(e.estimatedDelivery);return!["delivered","failed"].includes(e.status)&&t>a}function n(e){let t=new Date,a=new Date(e.estimatedDelivery);return Math.floor((t.getTime()-a.getTime())/36e5)}function l(e){return"failed"===e.status||i(e)&&n(e)>24?"urgent":i(e)||"incomplete"===e.status?"warning":"delivered"===e.status?"success":"normal"}function d(e,t){var a,r;return null!==(r=null===(a=({pending:["in_transit","failed"],in_transit:["delivered","incomplete","failed"],delivered:[],incomplete:["in_transit","delivered","failed"],failed:[]})[e])||void 0===a?void 0:a.includes(t))&&void 0!==r&&r}}},function(e){e.O(0,[176,338,971,938,744],function(){return e(e.s=1136)}),_N_E=e.O()}]);