(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[699],{7683:function(e,t,a){Promise.resolve().then(a.bind(a,7004))},7004:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return w}});var n=a(7437),s=a(2265),d=a(3352),r=a(1733),i=a(1095),l=a(1706),o=a(8034),c=a(9186),m=a(2929),p=a(5925);let u=[{id:"PAY-001",orderId:"ORD-003",amount:400,status:"completed",paymentDate:new Date(Date.now()-864e5).toISOString(),method:"cash",notes:"Pago recibido en efectivo",createdAt:new Date(Date.now()-432e6).toISOString(),updatedAt:new Date(Date.now()-864e5).toISOString()},{id:"PAY-002",orderId:"ORD-010",amount:280,status:"completed",paymentDate:new Date(Date.now()-2592e5).toISOString(),method:"transfer",notes:"Transferencia bancaria confirmada",createdAt:new Date(Date.now()-5184e5).toISOString(),updatedAt:new Date(Date.now()-2592e5).toISOString()},{id:"PAY-003",orderId:"ORD-001",amount:350,status:"pending",method:"cash",notes:"Pendiente de cobro",createdAt:new Date(Date.now()-1728e5).toISOString(),updatedAt:new Date().toISOString()},{id:"PAY-004",orderId:"ORD-002",amount:250,status:"pending",method:"cash",notes:"En proceso de entrega",createdAt:new Date(Date.now()-864e5).toISOString(),updatedAt:new Date().toISOString()},{id:"PAY-005",orderId:"ORD-004",amount:500,status:"pending",method:"cash",notes:"Pedido atrasado - cobro pendiente",createdAt:new Date(Date.now()-1728e5).toISOString(),updatedAt:new Date().toISOString()},{id:"PAY-006",orderId:"ORD-005",amount:200,status:"cancelled",notes:"Entrega fallida - pago cancelado",createdAt:new Date(Date.now()-6048e5).toISOString(),updatedAt:new Date(Date.now()-1728e5).toISOString()},{id:"PAY-007",orderId:"ORD-006",amount:300,status:"pending",method:"cash",notes:"Entrega parcial - ajustar monto",createdAt:new Date(Date.now()-2592e5).toISOString(),updatedAt:new Date().toISOString()},{id:"PAY-008",orderId:"ORD-007",amount:450,status:"pending",method:"transfer",notes:"Express - en tr\xe1nsito",createdAt:new Date(Date.now()-216e5).toISOString(),updatedAt:new Date().toISOString()},{id:"PAY-009",orderId:"ORD-008",amount:380,status:"pending",method:"cash",notes:"Asignado a otro conductor",createdAt:new Date(Date.now()-432e5).toISOString(),updatedAt:new Date().toISOString()},{id:"PAY-010",orderId:"ORD-009",amount:400,status:"pending",method:"cash",notes:"Express - cobro contra entrega",createdAt:new Date(Date.now()-72e5).toISOString(),updatedAt:new Date().toISOString()}],x=[{week:"Sem 1",completed:2800,pending:1200},{week:"Sem 2",completed:3200,pending:800},{week:"Sem 3",completed:2600,pending:1400},{week:"Sem 4",completed:3500,pending:500},{week:"Actual",completed:680,pending:2630}],g=[{method:"Efectivo",total:2180,percentage:65},{method:"Transferencia",total:730,percentage:22},{method:"Otros",total:400,percentage:13}];var h=a(9476);function w(){let[e,t]=(0,s.useState)(null),[a,w]=(0,s.useState)(!0),[S,D]=(0,s.useState)("all"),[v,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{b()},[S]);let b=async()=>{try{w(!0),await new Promise(e=>setTimeout(e,300));let e=[...u];"all"!==S&&(e=e.filter(e=>e.status===S));let a=e.map(e=>({...e,order:h.n.find(t=>t.id===e.orderId)})),n={totalPending:u.filter(e=>"pending"===e.status).reduce((e,t)=>e+t.amount,0),totalCompleted:u.filter(e=>"completed"===e.status).reduce((e,t)=>e+t.amount,0),totalCancelled:u.filter(e=>"cancelled"===e.status).reduce((e,t)=>e+t.amount,0),totalAmount:u.reduce((e,t)=>e+t.amount,0),pendingCount:u.filter(e=>"pending"===e.status).length,completedCount:u.filter(e=>"completed"===e.status).length,cancelledCount:u.filter(e=>"cancelled"===e.status).length};t({payments:a,summary:n,weeklyHistory:x,methodSummary:g})}catch(e){console.error("Error fetching payments:",e),p.ZP.error("Error al cargar los pagos")}finally{w(!1)}},N=e=>{switch(e){case"completed":return"badge-delivered";case"pending":return"badge-pending";case"cancelled":return"badge-failed";default:return""}},j=e=>{switch(e){case"cash":return(0,n.jsx)(d.Z,{className:"h-4 w-4"});case"transfer":return(0,n.jsx)(r.Z,{className:"h-4 w-4"});default:return(0,n.jsx)(i.Z,{className:"h-4 w-4"})}};return a&&!e?(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})}):(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20 lg:pb-0",children:[(0,n.jsx)("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-40",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,n.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Control de Pagos"}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("button",{onClick:()=>b(),className:"p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100",disabled:a,children:(0,n.jsx)(l.Z,{className:"h-5 w-5 ".concat(a?"animate-spin":"")})}),(0,n.jsx)("button",{onClick:()=>y(!v),className:"p-2 text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100",children:(0,n.jsx)(o.Z,{className:"h-5 w-5"})})]})]})})}),(0,n.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(c.Z,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),(0,n.jsxs)("div",{className:"min-w-0",children:[(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"Cobrado"}),(0,n.jsxs)("p",{className:"text-base sm:text-lg font-bold text-green-600 truncate",children:[(null==e?void 0:e.summary.totalCompleted)||0," CUP"]})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(m.Z,{className:"h-5 w-5 text-yellow-500 flex-shrink-0"}),(0,n.jsxs)("div",{className:"min-w-0",children:[(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"Pendiente"}),(0,n.jsxs)("p",{className:"text-base sm:text-lg font-bold text-yellow-600 truncate",children:[(null==e?void 0:e.summary.totalPending)||0," CUP"]})]})]})]})})}),(0,n.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[(0,n.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-4",children:(0,n.jsx)("div",{className:"flex space-x-1 p-1",children:["all","pending","completed","cancelled"].map(e=>(0,n.jsx)("button",{onClick:()=>D(e),className:"flex-1 py-2 px-2 sm:px-4 rounded-lg text-xs sm:text-sm font-medium transition-colors ".concat(S===e?"bg-primary-600 text-white":"text-gray-700 hover:bg-gray-100"),children:"all"===e?"Todos":"pending"===e?"Pendientes":"completed"===e?"Completados":"Cancelados"},e))})}),v&&(null==e?void 0:e.weeklyHistory)&&(0,n.jsxs)("div",{className:"card-base p-4 sm:p-6 mb-4",children:[(0,n.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-3",children:"Tendencia Semanal"}),(0,n.jsx)("div",{className:"grid grid-cols-5 gap-1 sm:gap-2",children:e.weeklyHistory.map(e=>(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:e.week}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("div",{className:"bg-green-100 rounded p-0.5 sm:p-1",children:(0,n.jsx)("p",{className:"text-xs font-semibold text-green-800",children:e.completed})}),(0,n.jsx)("div",{className:"bg-yellow-100 rounded p-0.5 sm:p-1",children:(0,n.jsx)("p",{className:"text-xs font-semibold text-yellow-800",children:e.pending})})]})]},e.week))})]}),v&&(null==e?void 0:e.methodSummary)&&(0,n.jsxs)("div",{className:"card-base p-4 sm:p-6 mb-4",children:[(0,n.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-3",children:"M\xe9todos de Pago"}),(0,n.jsx)("div",{className:"space-y-2",children:e.methodSummary.map(e=>(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,n.jsx)("span",{className:"text-xs sm:text-sm text-gray-600",children:e.method}),(0,n.jsxs)("span",{className:"text-xs sm:text-sm font-semibold",children:[e.total," CUP (",e.percentage,"%)"]})]}),(0,n.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5 sm:h-2",children:(0,n.jsx)("div",{className:"bg-primary-600 h-1.5 sm:h-2 rounded-full transition-all duration-500",style:{width:"".concat(e.percentage,"%")}})})]},e.method))})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:["Lista de Pagos ","all"!==S&&"(".concat("pending"===S?"Pendientes":"completed"===S?"Completados":"Cancelados",")")]}),null==e?void 0:e.payments.map(e=>(0,n.jsx)("div",{className:"card-base p-3 sm:p-4",children:(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,n.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:["#",e.id]}),(0,n.jsx)("span",{className:"badge-base text-xs ".concat(N(e.status)),children:"completed"===e.status?"Pagado":"pending"===e.status?"Pendiente":"Cancelado"}),e.method&&(0,n.jsxs)("div",{className:"hidden sm:flex items-center space-x-1 text-gray-500",children:[j(e.method),(0,n.jsx)("span",{className:"text-xs",children:"cash"===e.method?"Efectivo":"transfer"===e.method?"Transfer":"Otro"})]})]}),(0,n.jsxs)("div",{className:"text-xs sm:text-sm text-gray-600 mb-1",children:[(0,n.jsxs)("span",{className:"inline-block mr-3",children:["Pedido: ",e.orderId]}),e.order&&(0,n.jsx)("span",{className:"inline-block truncate max-w-[150px] sm:max-w-none",children:e.order.clientName})]}),e.notes&&(0,n.jsx)("p",{className:"text-xs text-gray-500 line-clamp-1 sm:line-clamp-2",children:e.notes}),(0,n.jsxs)("div",{className:"flex items-center space-x-3 text-xs text-gray-400 mt-1",children:[(0,n.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString("es-ES",{day:"2-digit",month:"short"})}),e.paymentDate&&(0,n.jsxs)("span",{children:["Pagado: ",new Date(e.paymentDate).toLocaleDateString("es-ES",{day:"2-digit",month:"short"})]})]})]}),(0,n.jsxs)("div",{className:"text-right ml-3 flex-shrink-0",children:[(0,n.jsx)("p",{className:"text-lg sm:text-xl font-bold text-gray-900",children:e.amount}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"CUP"})]})]})},e.id))]})]})]})}},9476:function(e,t,a){"use strict";a.d(t,{n:function(){return n}});let n=[{id:"ORD-001",clientName:"Mar\xeda Gonz\xe1lez",clientPhone:"+53 5234 5678",address:"Calle 23 #456, e/ 10 y 12",municipality:"Plaza de la Revoluci\xf3n",province:"La Habana",items:[{id:"1",name:"Paquete A",quantity:2,delivered:!1},{id:"2",name:"Paquete B",quantity:1,delivered:!1}],type:"express",status:"pending",driverId:"driver-001",estimatedDelivery:new Date(Date.now()+864e5).toISOString(),createdAt:new Date(Date.now()-1728e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"pending",driverPayment:350},{id:"ORD-002",clientName:"Carlos Rodr\xedguez",clientPhone:"+53 5876 5432",address:"Ave. 5ta #789, Miramar",municipality:"Playa",province:"La Habana",items:[{id:"3",name:"Documento importante",quantity:1,delivered:!1}],type:"normal",status:"in_transit",driverId:"driver-001",estimatedDelivery:new Date(Date.now()+2592e5).toISOString(),createdAt:new Date(Date.now()-864e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"pending",driverPayment:250},{id:"ORD-003",clientName:"Ana Mart\xednez",clientPhone:"+53 5111 2222",address:"Calle Mart\xed #123",municipality:"Centro Habana",province:"La Habana",items:[{id:"4",name:"Caja peque\xf1a",quantity:3,delivered:!0},{id:"5",name:"Sobre",quantity:2,delivered:!0}],type:"normal",status:"delivered",driverId:"driver-001",estimatedDelivery:new Date(Date.now()-864e5).toISOString(),createdAt:new Date(Date.now()-432e6).toISOString(),updatedAt:new Date(Date.now()-864e5).toISOString(),captureStatus:"success",notes:"Entregado sin novedad",driverPayment:400},{id:"ORD-004",clientName:"Pedro S\xe1nchez",clientPhone:"+53 5333 4444",address:"Calle 70 #234",municipality:"Marianao",province:"La Habana",items:[{id:"6",name:"Paquete grande",quantity:1,delivered:!1}],type:"express",status:"pending",driverId:"driver-001",estimatedDelivery:new Date(Date.now()-216e5).toISOString(),createdAt:new Date(Date.now()-1728e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"pending",driverPayment:500},{id:"ORD-005",clientName:"Laura D\xedaz",clientPhone:"+53 5555 6666",address:"Ave. 31 #890",municipality:"Cerro",province:"La Habana",items:[{id:"7",name:"Documentos",quantity:5,delivered:!1}],type:"normal",status:"failed",driverId:"driver-001",estimatedDelivery:new Date(Date.now()-1728e5).toISOString(),createdAt:new Date(Date.now()-6048e5).toISOString(),updatedAt:new Date(Date.now()-1728e5).toISOString(),captureStatus:"failed",notes:"Cliente no disponible en direcci\xf3n",driverPayment:200},{id:"ORD-006",clientName:"Roberto Fern\xe1ndez",clientPhone:"+53 5777 8888",address:"Calle San L\xe1zaro #567",municipality:"Centro Habana",province:"La Habana",items:[{id:"8",name:"Caja mediana",quantity:2,delivered:!0},{id:"9",name:"Sobre grande",quantity:1,delivered:!1}],type:"normal",status:"incomplete",driverId:"driver-001",estimatedDelivery:new Date(Date.now()+864e5).toISOString(),createdAt:new Date(Date.now()-2592e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"success",notes:"Cliente solo recibi\xf3 parte del pedido",driverPayment:300},{id:"ORD-007",clientName:"Elena Garc\xeda",clientPhone:"+53 5999 0000",address:"Calle 1ra #234, Vedado",municipality:"Plaza de la Revoluci\xf3n",province:"La Habana",items:[{id:"10",name:"Paquete urgente",quantity:1,delivered:!1}],type:"express",status:"in_transit",driverId:"driver-001",estimatedDelivery:new Date(Date.now()+216e5).toISOString(),createdAt:new Date(Date.now()-216e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"partial",driverPayment:450},{id:"ORD-008",clientName:"Jorge L\xf3pez",clientPhone:"+53 5123 4567",address:"Ave. Salvador Allende #789",municipality:"Diez de Octubre",province:"La Habana",items:[{id:"11",name:"Caja grande",quantity:1,delivered:!1},{id:"12",name:"Caja peque\xf1a",quantity:3,delivered:!1}],type:"normal",status:"pending",driverId:"driver-002",estimatedDelivery:new Date(Date.now()+1728e5).toISOString(),createdAt:new Date(Date.now()-432e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"pending",driverPayment:380},{id:"ORD-009",clientName:"Isabel Morales",clientPhone:"+53 5234 8765",address:"Calle 100 #456",municipality:"Boyeros",province:"La Habana",items:[{id:"13",name:"Sobre confidencial",quantity:1,delivered:!1}],type:"express",status:"pending",driverId:"driver-001",estimatedDelivery:new Date(Date.now()+432e5).toISOString(),createdAt:new Date(Date.now()-72e5).toISOString(),updatedAt:new Date().toISOString(),captureStatus:"pending",driverPayment:400},{id:"ORD-010",clientName:"Miguel Torres",clientPhone:"+53 5345 6789",address:"Calle 26 #123, Nuevo Vedado",municipality:"Plaza de la Revoluci\xf3n",province:"La Habana",items:[{id:"14",name:"Paquete mediano",quantity:2,delivered:!0}],type:"normal",status:"delivered",driverId:"driver-001",estimatedDelivery:new Date(Date.now()-2592e5).toISOString(),createdAt:new Date(Date.now()-5184e5).toISOString(),updatedAt:new Date(Date.now()-2592e5).toISOString(),captureStatus:"success",notes:"Entrega exitosa",driverPayment:280}]}},function(e){e.O(0,[540,971,938,744],function(){return e(e.s=7683)}),_N_E=e.O()}]);